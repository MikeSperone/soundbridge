"use strict";function start(e){function a(e){R&&z.send(e)}function t(e){switch(e){case"zero":y.volume.gain.cancelScheduledValues(b.currentTime),y.volume.gain.linearRampToValueAtTime(0,b.currentTime+5);break;case"one":r=setTimeout(function(){S.vol(0)},5e3);break;case"two":u=setTimeout(function(){x.stop()},5e3);break;case"three":setTimeout(function(){F.stop(),V.stop()},5e3),P=0}}function o(e,a,t){switch(e="local"===t?e.pageX:e,s=e/270,$("#"+a).children(".value").text(s.toFixed(2)),a){case"zero":y.pbRate(s),g&&(y.delTime(e/485),y.delFeedback(e/808));break;case"one":S.pbRate(s),g&&(S.delTime(e/485),S.delFeedback(e/808));break;case"two":x.read=(e-60)/360;break;case"three":e>231?(2===P&&V.stop(),P=3,F.sensor(e/11)):e<121?1!==P&&(T=2===P?V.elapsedTime/4:T,V.stop(),P=1,F.sensor(e/11,T)):2!==P&&(T=1===P?4*F.elapsedTime:T,0!==P&&F.stop(),P=2,V.vol=1,V.startSample(T))}}var i=$(".sensor"),n=$(".xy-pad"),s=1,r=void 0,u=void 0,c=Math.floor(29*Math.random()),l=e.samples[c],d=e.grain[c],m=e.delay[c],p="audio/"+l[0]+".mp3",v="audio/"+l[1]+".mp3",h="audio/"+l[2]+".mp3",f="audio/"+l[3]+".mp3",w="audio/hold/"+l[3]+"_slow.mp3",T=0,g=!0,b=new window.AudioContext;if(""!==l.a){var k="audio/"+l.a+".mp3";new Play(k,b,.8)}var y=new Playgroove(p,b);y.delaySwitch(m[0]);var S=new Playgroove(v,b);S.delaySwitch(m[1]);var x=new Playgrain(h,b);x.scatter=d[0],x.fade=d[1],x.spread=d[2],x.feedback=d[3];var F=new Loop(f,b),V=new Play(w,b),P=0,R=!1,z=new WebSocket("ws://mikesperone.com:31296");z.onopen=function(){R=!0,z.onmessage=function(e){var a=JSON.parse(e.data);a.out?t(a.out):a.over?A(a.over):a.data&&o(a.data[1],a.data[0],"remote")}};var A=function(e){switch(e){case"zero":y.volume.gain.cancelScheduledValues(b.currentTime),y.volume.gain.linearRampToValueAtTime(.7,b.currentTime+.5);break;case"one":S.volume.gain.cancelScheduledValues(b.currentTime),S.volume.gain.linearRampToValueAtTime(.7,b.currentTime+.5),clearTimeout(r);break;case"two":clearTimeout(u),x.start()}};i.on({mouseenter:function(){A(this.id),a('{"over": "'+this.id+'"}')},mouseleave:function(){t(this.id),a('{"out": "'+this.id+'"}')},mousemove:function(e){o(e,this.id,"local"),a('{"data": ["'+this.id+'", '+e.pageX+"]}")}});var M=null,X=null;n.on({mouseenter:function(){M=n.offset(),A(this.id)},mouseleave:function(){t(this.id)},mousemove:function(e){var t=e.pageX-M.left,i=e.pageY-M.top;i<250?t<250?X="zero":(t-=250,X="one"):(i-=250,t>250?(t-=250,X="two"):X="three");var n=Math.sqrt(t*t+i*i).toFixed(2);$(this).children(".value").text(X+"("+n+")"),o(parseFloat(n),X,"xy"),a('{"data": ["'+X+'", '+parseFloat(n)+"]}")}})}var test=void 0;$.getJSON("js/settings.json",function(e){start(e)});